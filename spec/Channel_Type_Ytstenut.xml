<?xml version="1.0" ?>
<node name="/Channel_Type_Ytstenut" xmlns:tp="http://telepathy.freedesktop.org/wiki/DbusSpec#extensions-v0">
  <tp:copyright> Copyright Â© 2005-2009 Collabora Limited </tp:copyright>
  <tp:license xmlns="http://www.w3.org/1999/xhtml">
    <p>This library is free software; you can redistribute it and/or
modify it under the terms of the GNU Lesser General Public
License as published by the Free Software Foundation; either
version 2.1 of the License, or (at your option) any later version.</p>

<p>This library is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
Lesser General Public License for more details.</p>

<p>You should have received a copy of the GNU Lesser General Public
License along with this library; if not, write to the Free Software
Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.</p>
  </tp:license>
  <interface name="com.meego.xpmn.ytstenut.Telepathy.Channel.Type.Ytstenut">
    <tp:requires interface="org.freedesktop.Telepathy.Channel"/>

    <tp:simple-type name="Message_Body" type="s" array-name="Message_Body">
      <tp:docstring>
        The UTF-8 encoded XML body of a Ytstenut message.
      </tp:docstring>
    </tp:simple-type>

    <tp:mapping name="Message_Attrs" array-name="Message_Attrs_List">
      <tp:member type="s" name="Name">
        <tp:docstring>The name of the attribute.</tp:docstring>
      </tp:member>
      <tp:member type="s" name="Value">
        <tp:docstring>The value of the attribute.</tp:docstring>
      </tp:member>
      <tp:docstring>
        A list of attributes present on a Ytstenut message.
      </tp:docstring>
    </tp:mapping>

    <property name="RequestType" access="read" tp:type="Request_Type"
      tp:name-for-bindings="Request_Type" type="s">
      <tp:docstring>
        The &lt;iq&gt; type of the request message. IMMUTABLE
      </tp:docstring>
    </property>

    <property name="RequestAttributes" access="read" tp:type="Message_Attrs"
      tp:name-for-bindings="Request_Attributes" type="a{ss}">
      <tp:docstring>
        The attributes present on the Ytstenut request message. IMMUTABLE
      </tp:docstring>
    </property>

    <property name="RequestBody" access="read" tp:type="Message_Body"
      tp:name-for-bindings="Request_Body" type="s">
      <tp:docstring>
        The UTF-8 encoded XML body of the Ytstenut request message. IMMUTABLE
      </tp:docstring>
    </property>

    <property name="ReplyType" access="read" tp:type="Reply_Type"
      tp:name-for-bindings="Reply_Type" type="u">
      <tp:docstring>
        The &lt;iq&gt; type of the reply message. Is unknown until a reply is
        sent or received.
      </tp:docstring>
    </property>

    <property name="ReplyAttributes" access="read" tp:type="Message_Attrs"
      tp:name-for-bindings="Reply_Attributes" type="a{ss}">
      <tp:docstring>
        The attributes present on the Ytstenut reply message. Is empty until a
        reply is sent or received.
      </tp:docstring>
    </property>

    <property name="ReplyBody" access="read" tp:type="Message_Body"
      tp:name-for-bindings="Reply_Body" type="s">
      <tp:docstring>
        The UTF-8 encoded XML body of the Ytstenut reply message. Is empty until
        a reply is sent or received.
      </tp:docstring>
    </property>

    <signal name="Replied" tp:name-for-bindings="Replied">
      <tp:docstring>
        This signal is emitted when a reply is sent or received. The ReplyType,
        ReplyAttributes, and ReplyBody properties are set when this signal
        is emitted.
      </tp:docstring>
    </signal>

    <method name="Reply" tp:name-for-bindings="Reply">
      <arg direction="in" name="Attributes" type="a{ss}"
        tp:type="Message_Attrs">
        <tp:docstring>
          The attributes to set on the Ytstenut reply message.
        </tp:docstring>
      </arg>
      <arg direction="in" name="Body" tp:type="Message_Body" type="s">
        <tp:docstring>
          Optional UTF-8 encoded XML body of the Ytstenut reply message. The
          top level element must have the name 'message' and be of the namespace
          'urn:ytstenut:message'. Any attributes in the Attributes argument
          will override any attributes of the same names on the top level
          element. If an empty string is used as the Body then a default
          body will be created instead.
        </tp:docstring>
      </arg>
      <tp:docstring>
        Send a &lt;iq&gt; result to the Ytstenut request. Either side of this
        channel can call this function. The Replied signal will be emitted,
        and the ReplyType, ReplyAttributes, and ReplyBody will be set.
      </tp:docstring>
      <tp:possible-errors>
        <tp:error name="org.freedesktop.Telepathy.Error.Disconnected"/>
        <tp:error name="org.freedesktop.Telepathy.Error.NetworkError"/>
        <tp:error name="org.freedesktop.Telepathy.Error.InvalidArgument"/>
        <!-- TODO: Incomplete -->
      </tp:possible-errors>
    </method>

    <method name="Fail" tp:name-for-bindings="Fail">
      <arg direction="in" name="Attributes" tp:type="Message_Attrs"
        type="a{ss}">
        <tp:docstring>
          The attributes to set on the Ytstenut reply error message.
        </tp:docstring>
      </arg>
      <tp:docstring>
        Send a &lt;iq&gt; error to the Ytstenut request. Either side of this
        channel can call this function. The Replied signal will be emitted,
        and the ReplyType, ReplyAttributes, and ReplyBody will be set.
      </tp:docstring>
      <tp:possible-errors>
        <tp:error name="org.freedesktop.Telepathy.Error.Disconnected"/>
        <tp:error name="org.freedesktop.Telepathy.Error.NetworkError"/>
        <tp:error name="org.freedesktop.Telepathy.Error.InvalidArgument"/>
        <!-- TODO: Incomplete -->
      </tp:possible-errors>
    </method>

    <tp:enum name="Request_Type" type="u">
      <tp:enumvalue suffix="Unknown" value="0">
        <tp:docstring>Invalid or unknown value.</tp:docstring>
      </tp:enumvalue>
      <tp:enumvalue suffix="Get" value="1">
        <tp:docstring>The iq request is of type 'get'</tp:docstring>
      </tp:enumvalue>
      <tp:enumvalue suffix="Set" value="2">
        <tp:docstring>The iq request is of type 'set'</tp:docstring>
      </tp:enumvalue>
    </tp:enum>

    <tp:enum name="Reply_Type" type="u">
      <tp:enumvalue suffix="Unknown" value="0">
        <tp:docstring>Invalid or unknown value.</tp:docstring>
      </tp:enumvalue>
      <tp:enumvalue suffix="Result" value="1">
        <tp:docstring>The iq reply is of type 'result'</tp:docstring>
      </tp:enumvalue>
      <tp:enumvalue suffix="Error" value="2">
        <tp:docstring>The iq reply is of type 'error'</tp:docstring>
      </tp:enumvalue>
    </tp:enum>

    <tp:docstring xmlns="http://www.w3.org/1999/xhtml">
      <p>When a channel of this type is created (via CreateChannel) the
      RequestType, RequestAttributes (and optionally RequestBody) should be
      specified. The request is sent while the channel is created.</p>
    </tp:docstring>

  </interface>
</node>
